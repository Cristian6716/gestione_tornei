<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FantaTournament Bracket</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0fdf4; }
        .bracket-scroll { -webkit-overflow-scrolling: touch; }
        .match-card { transition: all 0.2s; }
        .match-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // ⚙️ CONFIGURAZIONE DATI (MODIFICA QUI!)
        // ==========================================
        // Per aggiornare i risultati, modifica i campi 'scoreA', 'scoreB' e 'winner'.
        // 'winner': null (non giocata), 'A' (ha vinto squadra A), 'B' (ha vinto squadra B)
        
        const initialData = {
            matches: [
                // --- GIORNATA 24 ---
                { id: 'M1', day: 24, bracket: 'upper', teamA: 'Squadra A1', teamB: 'Squadra B1', scoreA: null, scoreB: null, winner: null },
                { id: 'M2', day: 24, bracket: 'upper', teamA: 'Squadra C1', teamB: 'Squadra D1', scoreA: null, scoreB: null, winner: null },
                { id: 'M6', day: 24, bracket: 'mid', teamA: 'Squadra A2', teamB: 'Squadra B3', scoreA: null, scoreB: null, winner: null },
                { id: 'M7', day: 24, bracket: 'mid', teamA: 'Squadra B2', teamB: 'Squadra A3', scoreA: null, scoreB: null, winner: null },
                { id: 'M8', day: 24, bracket: 'mid', teamA: 'Squadra C2', teamB: 'Squadra D3', scoreA: null, scoreB: null, winner: null },
                { id: 'M9', day: 24, bracket: 'mid', teamA: 'Squadra D2', teamB: 'Squadra C3', scoreA: null, scoreB: null, winner: null },
                { id: 'M4', day: 24, bracket: 'lower', teamA: 'Squadra A4', teamB: 'Squadra B4', scoreA: null, scoreB: null, winner: null },
                { id: 'M5', day: 24, bracket: 'lower', teamA: 'Squadra C4', teamB: 'Squadra D4', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 25 ---
                { id: 'M10', day: 25, bracket: 'mid', teamA: 'Vinc. M6', teamB: 'Vinc. M7', scoreA: null, scoreB: null, winner: null },
                { id: 'M11', day: 25, bracket: 'mid', teamA: 'Vinc. M8', teamB: 'Vinc. M9', scoreA: null, scoreB: null, winner: null },
                { id: 'M16', day: 25, bracket: 'mid', teamA: 'Perd. M6', teamB: 'Perd. M7', scoreA: null, scoreB: null, winner: null },
                { id: 'M17', day: 25, bracket: 'mid', teamA: 'Perd. M8', teamB: 'Perd. M9', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 26 ---
                { id: 'M3', day: 26, bracket: 'upper', teamA: 'Vinc. M1', teamB: 'Vinc. M2', scoreA: null, scoreB: null, winner: null },
                { id: 'M12', day: 26, bracket: 'mid', teamA: 'Vinc. M10', teamB: 'Perd. M1', scoreA: null, scoreB: null, winner: null },
                { id: 'M13', day: 26, bracket: 'mid', teamA: 'Vinc. M11', teamB: 'Perd. M2', scoreA: null, scoreB: null, winner: null },
                { id: 'M18', day: 26, bracket: 'lower', teamA: 'Perd. M10', teamB: 'Vinc. M16', scoreA: null, scoreB: null, winner: null },
                { id: 'M19', day: 26, bracket: 'lower', teamA: 'Perd. M11', teamB: 'Vinc. M17', scoreA: null, scoreB: null, winner: null },
                { id: 'M20', day: 26, bracket: 'lower', teamA: 'Vinc. M4', teamB: 'Perd. M16', scoreA: null, scoreB: null, winner: null },
                { id: 'M21', day: 26, bracket: 'lower', teamA: 'Vinc. M5', teamB: 'Perd. M17', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 27 ---
                { id: 'M14', day: 27, bracket: 'mid', teamA: 'Vinc. M12', teamB: 'Vinc. M13', scoreA: null, scoreB: null, winner: null },
                { id: 'M22', day: 27, bracket: 'lower', teamA: 'Vinc. M18', teamB: 'Perd. M12', scoreA: null, scoreB: null, winner: null },
                { id: 'M23', day: 27, bracket: 'lower', teamA: 'Vinc. M19', teamB: 'Perd. M13', scoreA: null, scoreB: null, winner: null },
                { id: 'M24', day: 27, bracket: 'lower', teamA: 'Vinc. M20', teamB: 'Perd. M18', scoreA: null, scoreB: null, winner: null },
                { id: 'M25', day: 27, bracket: 'lower', teamA: 'Vinc. M21', teamB: 'Perd. M19', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 28 ---
                { id: 'M15', day: 28, bracket: 'mid', teamA: 'Vinc. M14', teamB: 'Perd. M3', scoreA: null, scoreB: null, winner: null },
                { id: 'M26', day: 28, bracket: 'lower', teamA: 'Vinc. M22', teamB: 'Vinc. M23', scoreA: null, scoreB: null, winner: null },
                { id: 'M27', day: 28, bracket: 'lower', teamA: 'Vinc. M24', teamB: 'Perd. M22', scoreA: null, scoreB: null, winner: null },
                { id: 'M28', day: 28, bracket: 'lower', teamA: 'Vinc. M25', teamB: 'Perd. M23', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 29 ---
                { id: 'M30', day: 29, bracket: 'lower', teamA: 'Vinc. M26', teamB: 'Perd. M14', scoreA: null, scoreB: null, winner: null },
                { id: 'M29', day: 29, bracket: 'lower', teamA: 'Vinc. M27', teamB: 'Vinc. M28', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 30 ---
                { id: 'M31', day: 30, bracket: 'lower', teamA: 'Vinc. M30', teamB: 'Perd. M15', scoreA: null, scoreB: null, winner: null },
                { id: 'M32', day: 30, bracket: 'lower', teamA: 'Vinc. M29', teamB: 'Perd. M26', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 31 ---
                { id: 'M33', day: 31, bracket: 'lower', teamA: 'Vinc. M32', teamB: 'Perd. M30', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 32 ---
                { id: 'M34', day: 32, bracket: 'lower', teamA: 'Vinc. M33', teamB: 'Perd. M31', scoreA: null, scoreB: null, winner: null },

                // --- GIORNATA 34 (QUARTI) ---
                { id: 'M35', day: 34, bracket: 'finals', teamA: 'Vinc. M3', teamB: 'Vinc. M15', scoreA: null, scoreB: null, winner: null, label: 'Upper Final' },
                { id: 'M36', day: 34, bracket: 'finals', teamA: 'Vinc. M31', teamB: 'Vinc. M34', scoreA: null, scoreB: null, winner: null, label: 'Lower Final' },

                // --- GIORNATA 36 (SEMIFINALE) ---
                { id: 'M37', day: 36, bracket: 'finals', teamA: 'Perd. M35', teamB: 'Vinc. M36', scoreA: null, scoreB: null, winner: null, label: 'Semifinale' },

                // --- GIORNATA 38 (FINALE) ---
                { id: 'Final', day: 38, bracket: 'finals', teamA: 'Vinc. M35', teamB: 'Vinc. M37', scoreA: null, scoreB: null, winner: null, label: 'FINALISSIMA' },
            ]
        };

        // ==========================================
        // ⚛️ APPLICAZIONE REACT
        // ==========================================

        const MatchCard = ({ match }) => {
            const isPlayed = match.winner !== null;
            
            // Colori in base al bracket
            let bracketColor = "border-gray-300 bg-white";
            let badgeColor = "bg-gray-100 text-gray-600";
            
            if (match.bracket === 'upper') {
                bracketColor = "border-green-200 bg-green-50";
                badgeColor = "bg-green-200 text-green-800";
            } else if (match.bracket === 'mid') {
                bracketColor = "border-yellow-200 bg-yellow-50";
                badgeColor = "bg-yellow-200 text-yellow-800";
            } else if (match.bracket === 'lower') {
                bracketColor = "border-red-200 bg-red-50";
                badgeColor = "bg-red-200 text-red-800";
            } else if (match.bracket === 'finals') {
                bracketColor = "border-purple-200 bg-purple-50 shadow-md";
                badgeColor = "bg-purple-200 text-purple-800";
            }

            return (
                <div className={`p-3 rounded-lg border-2 ${bracketColor} match-card flex flex-col gap-2 min-w-[200px]`}>
                    <div className="flex justify-between items-center text-xs">
                        <span className={`px-2 py-0.5 rounded-full font-bold ${badgeColor}`}>{match.id}</span>
                        <span className="text-gray-500 font-semibold">G{match.day}</span>
                    </div>
                    {match.label && <div className="text-center text-xs font-bold text-purple-700 uppercase">{match.label}</div>}
                    
                    <div className="flex flex-col gap-1">
                        {/* Squadra A */}
                        <div className={`flex justify-between items-center p-1 rounded ${match.winner === 'A' ? 'bg-green-200 font-bold' : (match.winner === 'B' ? 'opacity-50' : '')}`}>
                            <span className="truncate text-sm">{match.teamA}</span>
                            <span className="font-mono font-bold">{match.scoreA !== null ? match.scoreA : '-'}</span>
                        </div>
                        {/* Squadra B */}
                        <div className={`flex justify-between items-center p-1 rounded ${match.winner === 'B' ? 'bg-green-200 font-bold' : (match.winner === 'A' ? 'opacity-50' : '')}`}>
                            <span className="truncate text-sm">{match.teamB}</span>
                            <span className="font-mono font-bold">{match.scoreB !== null ? match.scoreB : '-'}</span>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [view, setView] = React.useState('schedule'); // 'schedule' o 'bracket'
            const [matches, setMatches] = React.useState(initialData.matches);

            // Raggruppa per giornata
            const matchesByDay = matches.reduce((acc, match) => {
                if (!acc[match.day]) acc[match.day] = [];
                acc[match.day].push(match);
                return acc;
            }, {});

            // Ordina le giornate
            const sortedDays = Object.keys(matchesByDay).sort((a, b) => a - b);

            return (
                <div className="max-w-4xl mx-auto min-h-screen pb-10">
                    {/* Header */}
                    <header className="bg-gradient-to-r from-emerald-600 to-green-500 text-white p-4 shadow-lg sticky top-0 z-10">
                        <div className="flex justify-between items-center mb-4">
                            <h1 className="text-2xl font-bold flex items-center gap-2">
                                <i className="fas fa-trophy text-yellow-300"></i>
                                FantaTorneo
                            </h1>
                            <div className="text-xs bg-white/20 px-2 py-1 rounded">
                                G24 - G38
                            </div>
                        </div>
                        
                        {/* Navigazione */}
                        <div className="flex gap-2 p-1 bg-black/10 rounded-lg">
                            <button 
                                onClick={() => setView('schedule')}
                                className={`flex-1 py-2 rounded-md text-sm font-bold transition-all ${view === 'schedule' ? 'bg-white text-emerald-700 shadow' : 'text-white hover:bg-white/10'}`}
                            >
                                <i className="far fa-calendar-alt mr-2"></i> Calendario
                            </button>
                            <button 
                                onClick={() => setView('bracket')}
                                className={`flex-1 py-2 rounded-md text-sm font-bold transition-all ${view === 'bracket' ? 'bg-white text-emerald-700 shadow' : 'text-white hover:bg-white/10'}`}
                            >
                                <i className="fas fa-project-diagram mr-2"></i> Tabellone
                            </button>
                        </div>
                    </header>

                    {/* Contenuto */}
                    <main className="p-4">
                        {view === 'schedule' ? (
                            <div className="space-y-6">
                                {sortedDays.map(day => (
                                    <div key={day} className="animate-fade-in">
                                        <div className="flex items-center gap-2 mb-3">
                                            <span className="bg-emerald-100 text-emerald-800 text-sm font-bold px-3 py-1 rounded-full border border-emerald-200">
                                                Giornata {day}
                                            </span>
                                            {day == 33 || day == 35 || day == 37 ? <span className="text-xs text-gray-400 italic">(Pausa)</span> : null}
                                        </div>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            {matchesByDay[day].map(match => (
                                                <MatchCard key={match.id} match={match} />
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <div className="overflow-x-auto bracket-scroll pb-6">
                                <div className="flex gap-4 min-w-max p-2">
                                    {/* Visualizzazione Colonne per il Tabellone */}
                                    {sortedDays.map(day => (
                                        <div key={day} className="flex flex-col gap-3 w-64">
                                            <div className="text-center font-bold text-gray-400 text-sm mb-2 border-b-2 border-gray-200 pb-1">
                                                G{day}
                                            </div>
                                            {matchesByDay[day].map(match => (
                                                <MatchCard key={match.id} match={match} />
                                            ))}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </main>
                    
                    <footer className="text-center text-gray-400 text-xs p-4 mt-8 border-t">
                        Fantacalcio Tournament Bracket • Powered by React
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
